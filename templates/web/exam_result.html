{% extends "web/base.html"%}
{% load static %}
{% block css %}
<style>
    @import url(https://fonts.googleapis.com/css?family=Roboto:400,300,600,400italic);
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-font-smoothing: antialiased;
  -o-font-smoothing: antialiased;
  font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}
.nuresult_container {
  max-width: 400px;
  width: 100%;
  margin: 0 auto;
  position: relative;
  font-family: "Roboto", Helvetica, Arial, sans-serif;
  font-weight: 100;
  line-height: 30px;
  color: #777;
}

#result_form input[type="text"],
#result_form input[type="date"],
#result_form input[type="tel"],
#result_form input[type="url"],
#result_form textarea,
#result_form button[type="submit"],
#result_form input[type="button"] {
  font: 400 12px/16px "Roboto", Helvetica, Arial, sans-serif;
}

#result_form {
  background: #F9F9F9;
  padding: 25px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
}

.result_container {
  max-width: 400px;
  width: 100%;
  margin: 0 auto;
  background: #F9F9F9;
  padding: 25px;
  box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
}
#result_form h3 {
  display: block;
  font-size: 25px;
  font-weight: 400;
  margin-bottom: 10px;
  color:#3197EE;
  text-transform: uppercase;
}

#result_form h4 {
  margin: 5px 0 15px;
  display: block;
  font-size: 15px;
  font-weight: 400;
}

fieldset {
  border: medium none !important;
  margin: 0 0 10px;
  min-width: 100%;
  padding: 0;
  width: 100%;
}

#result_form input[type="text"],
#result_form input[type="date"],
#result_form input[type="tel"],
#result_form input[type="url"],
#result_form input[type="button"],
#result_form select,
#result_form textarea {
  width: 100%;
  border: 1px solid #ccc;
  background: #FFF;
  margin: 0 0 5px;
  padding: 10px;
  border-radius: 5px;
}

#result_form input[type="text"]:hover,
#result_form input[type="date"]:hover,
#result_form input[type="tel"]:hover,
#result_form input[type="url"]:hover,
#result_form input[type="button"],
#result_form textarea:hover {
  -webkit-transition: border-color 0.3s ease-in-out;
  -moz-transition: border-color 0.3s ease-in-out;
  transition: border-color 0.3s ease-in-out;
  border: 1px solid #aaa;
  
}



#result_form button[type="submit"],
#result_form input[type="button"] {
  cursor: pointer;
  width: 100%;
  border: none;
  background: #4CAF50;
  color: #FFF;
  margin: 0 0 5px;
  padding: 10px;
  font-size: 15px;
}

#result_form button[type="submit"]:hover,
#result_form input[type="button"]:hover {
  background: #43A047;
  -webkit-transition: background 0.3s ease-in-out;
  -moz-transition: background 0.3s ease-in-out;
  transition: background-color 0.3s ease-in-out;
}

#result_form button[type="submit"]:active {
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.5);
}



#result_form input:focus,
#result_form textarea:focus {
  outline: 0;
  border: 1px solid #aaa;
}

::-webkit-input-placeholder{
  color: #888;
}

:-moz-placeholder {
  color: #888;
}

::-moz-placeholder {
  color: #888;
}

:-ms-input-placeholder {
  color: #888;
}
/* calender */

.calendar{
  margin-bottom:200px;
}
.class-link{
  color:#333333;
  text-decoration:none;
}

.class-link:hover{
 color:#ffbb00; 
}

/* From here you can start to copy */

.calendar {
  padding:8px;
  background: #ffffff;
  border-radius: 4px;
  font-size:18px;
  border: 1px solid #333333;
  box-shadow: 0px 20px 40px rgba(59,60,56,0.05);
}
.ui-datepicker {
  background: #ffffff;
  border-radius: 15px;
}
.ui-datepicker-header {
  height: 50px;
  line-height: 50px;
  color: #ffffff;
  background: #31639c;
  margin-bottom: 10px;
}
.ui-datepicker-prev,
.ui-datepicker-next {
  width: 20px;
  height: 20px;
  text-indent: 9999px;
  border-radius: 100%;
  cursor: pointer;
  overflow: hidden;
  margin-top: 12px;
}
.ui-datepicker-prev {
  float: left;
  margin-left: 12px;
}
.ui-datepicker-prev:after {
  transform: rotate(45deg);
  margin: -43px 0px 0px 8px;
}
.ui-datepicker-next {
  float: right;
  margin-right: 12px;
}
.ui-datepicker-next:after {
  transform: rotate(-135deg);
  margin: -43px 0px 0px 6px;
}
.ui-datepicker-prev:after,
.ui-datepicker-next:after {
  content: '';
  position: absolute;
  display: block;
  width: 8px;
  height: 8px;
  border-left: 2px solid #ffffff;
  border-bottom: 2px solid #ffffff;
}
.ui-datepicker-prev:hover,
.ui-datepicker-next:hover,
.ui-datepicker-prev:hover:after,
.ui-datepicker-next:hover:after {
  border-color: #333333;
}
.ui-datepicker-title {
  text-align: center;
  font-size:25px;
}
.ui-datepicker-calendar {
  width: 100%;
  text-align: center;
}
.ui-datepicker-calendar thead tr th span {
  display: block;
  width: 40px;
  color: #31639c;
  margin-bottom: 5px;
  font-size: 18px;
}
.ui-state-default {
  display: block;
  text-decoration: none;
  color: #333333;
  line-height: 40px;
  font-size: 16px;
}
.ui-state-default:hover {
  color: #ffffff;
  background:#31639c;
  border-radius:50px;
  transition: all 0.25s cubic-bezier(0.7, -0.12, 0.2, 1.12);
}
.ui-state-highlight {
  color: #ffffff;
  background-color:#31639c;
  border-radius:50px;
}

.ui-state-active {
  color: #ffffff;
  background-color:#31639c;
  border-radius:50px;
}
.ui-datepicker-unselectable .ui-state-default {
  color: #eee;
  border: 2px solid transparent;
}
.text-danger{
  color:red;
  font-size: 10px;
}
.hide-date,.hide{
    display: none;
}
.f-20{
    font-size: 20px;
}
.text-center{
    text-align: center;
}
.bg-success{
  cursor: pointer;
    width: 100%;
    border: none;
    background: #4CAF50;
    color: #FFF;
    margin: 0 0 5px;
    padding: 10px;
    font-size: 15px;

}
.d-inline{
  display: inline-block;
}
.table{
  border-collapse: collapse;
  border: 2px solid #c9c3c3;
  width: 100%;
}
th, td {
    border: 2px solid #c9c3c3;
    padding: 8.5px;
    text-align: center;
    /* background: #E1EAF1; */
}
</style>
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

{% endblock %}
{% block content %}


    <section class="container" id="gallery" style="background: none;">
        <section class=" row">
            <div class="nuresult_container col-md-6">  
                <div id="result_form">
                    <center>
                        <h3>Exam Result  </h3>
                        <h4>Place your information to get results</h4>
                    </center>
                    <h4>
                      <div id="indivisul">
                        <fieldset>
                          <label for="">HallTicket No :</label>
                            <input placeholder="Enter HallTicket No" type="text" id="hall_ticket" name="hall_ticket" maxlength="11" tabindex="1"  required autofocus>
                            <span class="text-danger hide">HallTicket No is required</span>
                        </fieldset>
                        
                        <fieldset>
                          <label for="datepicker">Date of Birth : </label>
                            <input placeholder="Select Your Date of Birth" type="date" name="dob" id="datepicker" value="" class="calendar" required>
                            <span class="text-danger hide-date">Date of Birth is required</span>
                        </fieldset>
                        
                        <fieldset>
                            <input name="button" id="subimit_button"  type="button"value="Search Result">
                        </fieldset>
                      </div>
                    </h4>
                </div>
            </div>
            
              <p class="text-danger f-20 text-center hide false_msg " style="margin-top: 20px;">Enterd HallTicket and Date of Birth does not match   </p>
              <div class="result_container hide col-md-6" style="color: #333333; margin-top: 20px;">
               
                <table class="table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th> <span id="name"></span></th>
                    </tr>
                    <tr>
                      <th>Reg No</th>
                      <th> <span id="reg_no"></span></th>
                    </tr>
                    <tr>
                      <th>Program</th>
                      <th> <span id="program"></span></th>
                    </tr>
                    <tr>
                      <th>Semester</th>
                      <th> <span id="sem"></span></th>
                    </tr>
                  </thead>
                  
                </table>
                <div style="margin-top: 20px;" class="text-center">
                  <a href=""  class="url bg-success">Download Result</a>
                </div>
              </div>
              
            </section>
    </section>

{% endblock %}

{% block script %}
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
  //  jQuery(document).ready(function () {
  //       jQuery('#datepicker').datepicker({
  //           format: 'dd/mm/yyyy',
  //           startDate: '+1d'
  //       });
  //   });
</script>
<script>
    $('#subimit_button').click(function(){
        var hall_ticket = $('#hall_ticket').val();
        var dob = $('#datepicker').val();
        
            if (hall_ticket == '') {
                $('#hall_ticket').next().removeClass('hide');
            }else{
                $('#hall_ticket').next().addClass('hide');
            }
            if (dob == '') {
                $('#datepicker').next().removeClass('hide-date');
            }else{
                $('#datepicker').next().addClass('hide-date');
            }
        
        var data = {'hall_ticket':hall_ticket,'dob':dob};
        if (hall_ticket) {
          
          $.ajax({
              url: "{% url 'web:find_result' %}",
              data: data,
              success: function (data) {
                
                  if (data.status == 'false') {
                    console.log('false');
                      $('.false_msg').removeClass('hide');
                      $('.result_container').removeClass('d-inline');
                      $('.result_container').addClass('hide');
                  }else{
                    console.log('success')
                    console.log(data);
                      // $('#result_form').addClass('hide');
                      $('.false_msg').addClass('hide');
                      $('.result_container').addClass('d-inline');
                      $('.result_container').removeClass('hide');
                      $('.url').attr('href',data.download_url);
                      $('#name').html(data.name);
                      $('#reg_no').html(data.reg_no);
                      $('#program').html(data.program);
                      $('#sem').html(data.sem);
                  }
              }
          });
        }
        
    });
</script>
{% endblock %}